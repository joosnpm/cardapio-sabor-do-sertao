<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sabor do Sertão - Bolo de Tapioca</title>
  
  <script src="https://cdn.tailwindcss.com"></script>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <!-- Script do EmailJS - Adicionado para envio de e-mail -->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

  <style>
    /* Estilos personalizados para complementar o Tailwind */
    body {
      background-color: #FDF8F2; /* Um tom de bege claro e acolhedor */
      font-family: 'Inter', sans-serif;
      color: #5C3A21; /* Marrom escuro para o texto */
    }
    h1, h2, h3 {
      font-family: 'Playfair Display', serif;
    }
    /* Efeito de transição suave nos botões e cards */
    .transition-all {
      transition: all 0.3s ease-in-out;
    }
  </style>
</head>
<body class="antialiased">

  <!-- Cabeçalho e Introdução -->
  <header class="text-center py-12 px-2.5 flex flex-col items-center">
    
    <img src="https://drive.google.com/thumbnail?id=1JkrMgfvCnyON8ACJR3-Dx4XJyTGm_hrk&sz=w1000" alt="Logo Sabor do Sertão" class="w-full max-w-xs md:max-w-sm mb-4">
    
    <p class="text-xl mt-2 text-amber-800 px-2.5">O autêntico Bolo de Tapioca cremoso, com o gostinho especial que não adianta ver. Você só vai entender depois de experimentar, então não perde tempo pois as fatias são limitadas.</p>
  </header>

  <main class="container mx-auto px-2.5 pb-12">
    
    <div class="bg-white rounded-2xl shadow-lg overflow-hidden">
      <div class="grid grid-cols-1 md:grid-cols-2 items-center">
        
        <div class="h-80 md:h-full">
          <img src="https://drive.google.com/thumbnail?id=13C2M621a1X_JUJKgSG5-K6M3mgjmno1t&sz=w1000" alt="Detalhe do Bolo de Tapioca Cremoso" class="w-full h-full object-cover">
        </div>

        <div class="p-6 md:p-12">
          <h2 class="text-4xl md:text-5xl font-bold text-amber-900">Tenha experiência ao saborear cada fatia</h2>
          <p class="mt-4 text-lg text-amber-800">
            Cada fatia do nosso Bolo de Tapioca é como um abraço quentinho por dentro. A tapioca, macia como uma nuvem, desfaz-se na boca, enquanto o coco fresco e o leite de coco te acolhem com seu sabor e perfume.
          </p>
          <ul class="mt-6 space-y-3">
            <li class="flex items-center">
              <svg class="w-6 h-6 text-green-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
              <span class="text-amber-800">Textura aveludada que derrete na boca.</span>
            </li>
            <li class="flex items-center">
              <svg class="w-6 h-6 text-green-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
              <span class="text-amber-800">Cremosidade absurda vinda do leite de coco.</span>
            </li>
            <li class="flex items-center">
              <svg class="w-6 h-6 text-green-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg>
              <span class="text-amber-800">Finalizado com coco ralado da melhor qualidade para um sabor autêntico.</span>
            </li>
          </ul>
          <p class="mt-6 text-amber-800">
            Não é apenas uma sobremesa, é um pedaço da nossa história e do nosso Sertão, feito para adoçar seu dia e te dar uma experiência única para alegrar teu dia.
          </p>
        </div>
      </div>
    </div>
    
    <div class="mt-16">
      <h2 class="text-4xl font-bold text-center text-amber-900 mb-8">Faça seu Pedido</h2>
      <div class="grid grid-cols-2 gap-4 max-w-4xl mx-auto">
        
        <div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:scale-105 transition-all">
          
          <img src="https://drive.google.com/thumbnail?id=1Z6WU8zgupMukcOIjS3PbfOzV9nSytkcr&sz=w1000" alt="Fatia do Bolo de Tapioca" class="w-full h-48 object-cover">
          
          <div class="p-4">
            <h3 class="text-2xl font-bold text-amber-900">Fatia do Bolo</h3>
            <p class="text-sm mt-2 text-amber-800">Uma fatia generosa e a sua dose individual de felicidade. A cremosidade e o sabor que só nosso bolo tem.</p>
            <p class="text-xl font-semibold mt-4 text-amber-900">R$ 5,00</p>
            <div class="flex items-center mt-4 gap-2">
              <input type="number" id="qtd-fatia" class="w-16 text-center border-2 border-amber-200 rounded-lg p-2 focus:ring-2 focus:ring-amber-500 focus:outline-none" value="1" min="1">
              <button onclick="adicionarItem('Fatia do Bolo', 5.00, 'qtd-fatia')" class="w-full bg-amber-800 text-white font-bold py-2 px-2 rounded-lg hover:bg-amber-900 transition-all shadow-md text-sm">Adicionar</button>
            </div>
          </div>
        </div>

        <div class="bg-white rounded-2xl shadow-lg overflow-hidden transform hover:scale-105 transition-all">
          
          <img src="https://drive.google.com/thumbnail?id=1czASbu3RHnkIg2887cF4npMETeTFqRvZ&sz=w1000" alt="Bolo de Tapioca Inteiro" class="w-full h-48 object-cover">

          <div class="p-4">
            <h3 class="text-2xl font-bold text-amber-900">Bolo Inteiro</h3>
            <p class="text-sm mt-2 text-amber-800">A felicidade completa para compartilhar com quem você ama. Perfeito para festas e reuniões.</p>
            <p class="text-xl font-semibold mt-4 text-amber-900">R$ 50,00</p>
            <div class="flex items-center mt-4 gap-2">
              <input type="number" id="qtd-bolo" class="w-16 text-center border-2 border-amber-200 rounded-lg p-2 focus:ring-2 focus:ring-amber-500 focus:outline-none" value="1" min="1">
              <button onclick="adicionarItem('Bolo Inteiro', 50.00, 'qtd-bolo')" class="w-full bg-amber-800 text-white font-bold py-2 px-2 rounded-lg hover:bg-amber-900 transition-all shadow-md text-sm">Adicionar</button>
            </div>
          </div>
        </div>
      </div>
    </div>


    <div id="carrinho" class="mt-16 max-w-2xl mx-auto bg-white/80 backdrop-blur-sm p-6 md:p-8 rounded-2xl shadow-xl border border-amber-200">
      <h2 class="text-4xl font-bold text-center text-amber-900">Seu Pedido</h2>
      
      <ul id="lista-carrinho" class="mt-6 space-y-3">
      </ul>

      <div class="border-t-2 border-dashed border-amber-200 my-6"></div>

      <div class="space-y-6">
        <div>
          <h3 class="text-xl font-bold text-amber-900 mb-3">Seus Dados</h3>
          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
            <div>
              <label for="nome" class="block text-sm font-medium text-amber-800 mb-1">Seu Nome *</label>
              <input type="text" id="nome" class="w-full p-2 border-2 border-amber-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:outline-none" placeholder="Digite seu nome">
            </div>
            <div>
              <label for="telefone" class="block text-sm font-medium text-amber-800 mb-1">Seu WhatsApp (para entrarmos em contato)*</label>
              <input type="tel" id="telefone" class="w-full p-2 border-2 border-amber-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:outline-none" placeholder="(XX) XXXXX-XXXX">
            </div>
            <div class="sm:col-span-2">
               <label for="turma" class="block text-sm font-medium text-amber-800 mb-1">Sua Turma (Opcional)</label>
               <input type="text" id="turma" class="w-full p-2 border-2 border-amber-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:outline-none" placeholder="Ex: ADM-01">
            </div>
          </div>
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
          <div>
            <h3 class="text-xl font-bold text-amber-900 mb-2">Como devemos preparar o seu bolo?</h3>
            <div class="space-y-2">
              <label class="flex items-center"><input type="checkbox" id="add-leite-condensado" class="h-4 w-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500"> <span class="ml-2">Com Leite Condensado</span></label>
              <label class="flex items-center"><input type="checkbox" id="add-coco" class="h-4 w-4 text-amber-600 border-gray-300 rounded focus:ring-amber-500"> <span class="ml-2">Com Coco Ralado Extra</span></label>
            </div>
          </div>
          <div>
            <h3 class="text-xl font-bold text-amber-900 mb-2">Opções de Entrega</h3>
            <div class="space-y-2">
              <label class="flex items-center"><input type="radio" name="entrega" value="Retirar no Local" checked onchange="atualizarCarrinho()" class="h-4 w-4 text-amber-600 border-gray-300 focus:ring-amber-500"> <span class="ml-2 text-sm sm:text-base">Retirar no Local</span></label>
              <label class="flex items-center"><input type="radio" name="entrega" value="Entregar na UAST" onchange="atualizarCarrinho()" class="h-4 w-4 text-amber-600 border-gray-300 focus:ring-amber-500"> <span class="ml-2 text-sm sm:text-base">Entregar na UAST (Taxa: R$ 1,00)</span></label>
              <p class="text-xs text-amber-700 ml-6">Grátis a partir de 2 fatias!</p>
            </div>
          </div>
        </div>

        <div>
          <label for="pagamento" class="block text-xl font-bold text-amber-900 mb-2">Forma de Pagamento *</label>
          <select id="pagamento" class="w-full p-2 border-2 border-amber-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:outline-none">
            <option value="" disabled selected>Selecione uma opção...</option>
            <option value="Pix">Pix</option>
            <option value="Cartão de Crédito">Cartão de Crédito</option>
            <option value="Cartão de Débito">Cartão de Débito</option>
            <option value="Dinheiro">Dinheiro</option>
          </select>
        </div>
      </div>

      <div id="total" class="text-right text-lg font-bold mt-6 pt-4 border-t-2 border-dashed border-amber-200 text-amber-900 space-y-1">
        </div>
      
      <textarea id="obs" class="w-full mt-4 p-3 border-2 border-amber-200 rounded-lg focus:ring-2 focus:ring-amber-500 focus:outline-none" placeholder="Observações do pedido (opcional)"></textarea>
      
      <div class="mt-6 p-4 bg-amber-100 border-l-4 border-amber-500 text-amber-800 rounded-r-lg">
        <p class="font-bold">Atenção!</p>
        <p class="text-sm">As retiradas e entregas ocorrerão no dia **17/06**, das **19h às 22h**, durante a Maratona Gastronômica.</p>
      </div>
      
      <button id="finalizar" onclick="finalizarPedido()" class="w-full mt-6 bg-green-600 text-white font-bold py-3 px-6 text-lg rounded-lg hover:bg-green-700 transition-all shadow-lg transform hover:scale-105">
        Finalizar Pedido
      </button>
    </div>

  </main>

  <script>
    // --- Configuração do EmailJS ---
    // 1. Crie uma conta gratuita em https://www.emailjs.com
    // 2. Conecte seu e-mail (ex: Gmail) em "Email Services".
    // 3. Crie um "Email Template". Você pode usar as variáveis abaixo (ex: {{nome_cliente}}, {{pedido_detalhes}}) no seu template.
    // 4. Copie suas chaves aqui:
    (function(){
       emailjs.init("efsCX7TbGybNV6nI5"); // Cole sua Public Key aqui
    })();
    const SERVICE_ID = "service_wpsjb4q"; // Cole seu Service ID aqui
    const TEMPLATE_ID = "template_81xt8vf"; // Cole seu Template ID aqui
    // --- Fim da Configuração ---


    const carrinho = [];
    const numeroWhatsApp = "5587996612962"; 

    function adicionarItem(nome, preco, inputId) {
      const quantidadeInput = document.getElementById(inputId);
      const qtd = parseInt(quantidadeInput.value);

      if (isNaN(qtd) || qtd < 1) { return; }
      
      const itemExistente = carrinho.find(item => item.nome === nome);
      if (itemExistente) {
        itemExistente.qtd += qtd;
      } else {
        carrinho.push({ nome, preco, qtd });
      }
      quantidadeInput.value = "1";
      atualizarCarrinho();
    }

    function removerItem(index) {
      if (carrinho[index].qtd > 1) {
          carrinho[index].qtd--;
      } else {
          carrinho.splice(index, 1);
      }
      atualizarCarrinho();
    }

    function atualizarCarrinho() {
      const listaCarrinho = document.getElementById("lista-carrinho");
      const totalElement = document.getElementById("total");
      
      listaCarrinho.innerHTML = ""; 

      let subtotal = carrinho.reduce((soma, item) => soma + item.preco * item.qtd, 0);
      
      if (carrinho.length === 0) {
        listaCarrinho.innerHTML = '<li class="text-center text-amber-700">Seu carrinho está vazio.</li>';
        totalElement.innerHTML = `<div class="text-2xl">Total: R$ 0,00</div>`;
        return;
      }
      
      carrinho.forEach((item, index) => {
        const li = document.createElement("li");
        li.className = "flex justify-between items-center bg-amber-50 p-3 rounded-lg";
        li.innerHTML = `
          <div>
            <span class="font-bold text-amber-900">${item.qtd}x ${item.nome}</span>
            <span class="text-amber-700"> - R$ ${(item.qtd * item.preco).toFixed(2)}</span>
          </div>
          <button onclick="removerItem(${index})" class="bg-red-500 text-white font-bold w-6 h-6 rounded-full hover:bg-red-600 transition-all flex items-center justify-center text-sm">X</button>
        `;
        listaCarrinho.appendChild(li);
      });

      const formaEntrega = document.querySelector('input[name="entrega"]:checked').value;
      let taxaEntrega = 0;
      let totalFinal = subtotal;
      let htmlTotal = `<div>Subtotal: R$ ${subtotal.toFixed(2)}</div>`;
      
      if (formaEntrega === "Entregar na UAST") {
          const qtdFatias = carrinho.find(item => item.nome === 'Fatia do Bolo')?.qtd || 0;
          const qtdBolos = carrinho.find(item => item.nome === 'Bolo Inteiro')?.qtd || 0;
          if (qtdFatias < 2 && qtdBolos === 0) {
              taxaEntrega = 1.00;
              totalFinal += taxaEntrega;
              htmlTotal += `<div>Taxa de Entrega: R$ ${taxaEntrega.toFixed(2)}</div>`;
          } else {
              htmlTotal += `<div>Taxa de Entrega: <span class="text-green-600">Grátis!</span></div>`;
          }
      }
      htmlTotal += `<div class="text-2xl mt-2">Total: R$ ${totalFinal.toFixed(2)}</div>`;
      totalElement.innerHTML = htmlTotal;
    }

    function finalizarPedido() {
      const finalizarBtn = document.getElementById('finalizar');
      
      if (carrinho.length === 0) {
        alert("Seu carrinho está vazio! Adicione um item para continuar.");
        return;
      }
      
      const nome = document.getElementById("nome").value.trim();
      const telefone = document.getElementById("telefone").value.trim();
      const turma = document.getElementById("turma").value.trim();
      const addLeiteCondensado = document.getElementById("add-leite-condensado").checked;
      const addCoco = document.getElementById("add-coco").checked;
      const formaEntrega = document.querySelector('input[name="entrega"]:checked').value;
      const formaPagamento = document.getElementById("pagamento").value;
      const obs = document.getElementById("obs").value.trim();

      if (!nome || !telefone) {
        alert("Por favor, preencha seu Nome e WhatsApp para continuar.");
        return;
      }
      if (!formaPagamento) {
        alert("Por favor, selecione uma forma de pagamento.");
        return;
      }

      finalizarBtn.disabled = true;
      finalizarBtn.innerText = "Enviando...";

      // --- Preparação dos dados para WhatsApp e E-mail ---
      let pedido_whatsapp = "";
      let pedido_email = "";
      carrinho.forEach(item => {
        const linhaPedido = `• ${item.qtd}x ${item.nome} - R$ ${(item.preco * item.qtd).toFixed(2)}\n`;
        pedido_whatsapp += `• _${item.qtd}x_ *${item.nome}* - R$ ${(item.preco * item.qtd).toFixed(2)}\n`;
        pedido_email += linhaPedido;
      });

      let subtotal = carrinho.reduce((soma, item) => soma + item.preco * item.qtd, 0);
      let taxaEntrega = 0;
      let totalFinal = subtotal;
      let textoTaxa = "";

      if (formaEntrega === "Entregar na UAST") {
          const qtdFatias = carrinho.find(item => item.nome === 'Fatia do Bolo')?.qtd || 0;
          const qtdBolos = carrinho.find(item => item.nome === 'Bolo Inteiro')?.qtd || 0;
          if (qtdFatias < 2 && qtdBolos === 0) {
              taxaEntrega = 1.00;
              totalFinal += taxaEntrega;
          }
          textoTaxa = taxaEntrega > 0 ? `R$ ${taxaEntrega.toFixed(2)}` : 'Grátis!';
      }
      
      let preparo = [];
      if (addLeiteCondensado) preparo.push("Leite Condensado");
      if (addCoco) preparo.push("Coco Ralado Extra");
      
      // --- Objeto de parâmetros para o EmailJS ---
      const templateParams = {
          nome_cliente: nome,
          telefone_cliente: telefone,
          turma_cliente: turma || "Não informado",
          pedido_detalhes: pedido_email,
          subtotal: `R$ ${subtotal.toFixed(2)}`,
          taxa_entrega: textoTaxa || "N/A",
          total_pedido: `R$ ${totalFinal.toFixed(2)}`,
          como_preparar: preparo.length > 0 ? preparo.join(', ') : "Padrão",
          entrega: formaEntrega,
          pagamento: formaPagamento,
          observacoes: obs || "Sem observações"
      };

      // --- Envio do E-mail via EmailJS ---
      emailjs.send(SERVICE_ID, TEMPLATE_ID, templateParams)
        .then(function(response) {
           console.log('E-MAIL ENVIADO COM SUCESSO!', response.status, response.text);
           abrirWhatsApp(); // Abre o WhatsApp somente após o sucesso do e-mail
        }, function(error) {
           console.log('FALHA NO ENVIO DO E-MAIL...', error);
           alert("Houve uma falha ao enviar a notificação do seu pedido. Por favor, tente novamente.");
           abrirWhatsApp(); // Abre o WhatsApp mesmo se o e-mail falhar, para não perder o pedido.
        });

      function abrirWhatsApp() {
        let mensagem_whatsapp = `Olá, *Ana*!\nGostaria de fazer o seguinte pedido:\n\n${pedido_whatsapp}`;
        mensagem_whatsapp += `\n*Subtotal:* R$ ${subtotal.toFixed(2)}`;
        if (formaEntrega === "Entregar na UAST") {
          mensagem_whatsapp += `\n*Taxa de Entrega:* ${textoTaxa}`;
        }
        mensagem_whatsapp += `\n\n*Total do Pedido:* R$ ${totalFinal.toFixed(2)}`;
        mensagem_whatsapp += `\n\n--- _Detalhes do Pedido_ ---\n`;
        mensagem_whatsapp += `*Cliente:* ${nome}\n`;
        mensagem_whatsapp += `*Contato:* ${telefone}\n`;
        if (turma) {
          mensagem_whatsapp += `*Turma:* ${turma}\n`;
        }
        if (preparo.length > 0) {
          mensagem_whatsapp += `*Como Preparar:* ${preparo.join(', ')}\n`;
        } else {
          mensagem_whatsapp += `*Como Preparar:* _Padrão_\n`;
        }
        mensagem_whatsapp += `*Entrega:* ${formaEntrega}\n`;
        mensagem_whatsapp += `*Pagamento:* ${formaPagamento}`;
        if (obs) {
          mensagem_whatsapp += `\n\n_Observações:_\n${obs}`;
        }
        mensagem_whatsapp += `\n\n--- _Retirada/Entrega_ ---\n`;
        mensagem_whatsapp += `*Data:* 17/06\n`;
        mensagem_whatsapp += `*Horário:* Das 19h às 22h`;
        
        const url = `https://wa.me/${numeroWhatsApp}?text=${encodeURIComponent(mensagem_whatsapp)}`;
        window.open(url, "_blank");

        finalizarBtn.disabled = false;
        finalizarBtn.innerText = "Finalizar Pedido";
      }
    }

    document.querySelectorAll('input[name="entrega"]').forEach(radio => {
        radio.addEventListener('change', atualizarCarrinho);
    });

    document.addEventListener('DOMContentLoaded', atualizarCarrinho);
  </script>
</body>
</html>
